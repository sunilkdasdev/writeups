
---  

## 1Ô∏è‚É£ Core Spring Container & Dependency Injection  

| # | Question | Answer |
|---|----------|--------|
| 1 | How does Spring‚Äôs `DefaultListableBeanFactory` manage bean definitions internally? | It stores `BeanDefinition`s in a thread‚Äësafe `ConcurrentHashMap<String, BeanDefinition>` keyed by bean name and keeps a parent‚Äëchild hierarchy for inheritance, allowing O(1) lookup and fast merging. |
| 2 | Explain the complete lifecycle of a Spring bean from definition registration to destruction. | Registration ‚Üí parsing ‚Üí **instantiation** ‚Üí **populate properties** ‚Üí `Aware` callbacks ‚Üí `BeanPostProcessor` **pre‚Äëinit** ‚Üí `@PostConstruct` / `InitializingBean` ‚Üí custom init‚Äëmethod ‚Üí bean ready ‚Üí on shutdown: `@PreDestroy` / `DisposableBean` ‚Üí `BeanPostProcessor` **post‚Äëdestroy** ‚Üí removal. |
| 3 | What is the difference between type‚Äëbased and name‚Äëbased autowiring? | Type‚Äëbased (`@Autowired` without qualifier) matches by Java type; name‚Äëbased (`@Resource(name="‚Ä¶")`) matches by bean name. Use type‚Äëbased for clarity, name‚Äëbased when several beans share the same type. |
| 4 | How does Spring resolve generic‚Äëtype injection points (e.g., `Repository<User>`)? | It uses `ResolvableType` to read the generic metadata at runtime, matches the raw type (`Repository`) and then verifies the generic argument (`User`) against the actual bean‚Äôs generic declarations. |
| 5 | How does `@Primary` interact with `@Qualifier` when multiple candidates exist? | `@Primary` gives a bean higher precedence when **no** qualifier is present. An explicit `@Qualifier` always overrides primary selection. |
| 6 | Discuss circular dependencies and Spring‚Äôs ‚Äúearly reference‚Äù mechanism. | For setter‚Äëinjected cycles Spring creates the first bean, registers an `ObjectFactory` that supplies a **raw early reference**, then injects the second bean. When the first bean later needs the second, the factory returns the already‚Äëcreated instance, breaking the cycle. |
| 7 | When would you use `ObjectFactory<T>` or `Provider<T>` instead of direct injection? | When you need **lazy** fetching, a **prototype** inside a singleton, or to avoid early initialization that could cause circular references. |
| 8 | Explain `SmartInitializingSingleton`. | Beans implementing it receive a callback (`afterSingletonsInstantiated`) **after** all singleton beans have been created, useful for post‚Äëstartup validation or starting background jobs. |
| 9 | Field injection vs. constructor injection ‚Äì impact on testability? | Constructor injection makes dependencies explicit and lets you instantiate beans directly in tests; field injection hides them and usually requires reflection or Mockito‚Äôs `@InjectMocks`. |
|10| How does Spring handle a prototype bean injected into a singleton? | By default the singleton receives a *single* prototype instance at creation time. To obtain a fresh prototype each call, inject `ObjectProvider<Proto>` or use an `@Lookup` method that Spring overrides. |
|11| What is bean definition inheritance and why is it rarely used today? | Child definitions can **override** or **add** property values from a parent definition. Modern Java‚Äëbased config gives the same flexibility with less XML overhead, so inheritance is seldom needed. |
|12| How does `@Configuration` class proxying affect bean method calls? | With `proxyBeanMethods = true` (default) Spring creates a CGLIB subclass proxy so that internal `@Bean` method calls go through the container, preserving scoping and proxying. Setting it to `false` makes calls direct, improving startup speed but breaking cross‚Äëmethod bean referencing. |
|13| When does `@Lazy` on a bean definition differ from `@Lazy` on an injection point? | On a bean definition the **entire bean** is lazily instantiated the first time it‚Äôs needed. On an injection point only that particular dependency is lazily resolved, leaving the bean itself eager. |
|14| How does `ScopedProxyMode` work for request‚Äëscoped beans in a non‚Äëweb context? | Spring creates a **class‚Äëbased proxy** that implements the scoped bean‚Äôs type; each method call triggers a lookup of the actual bean from the current scope (e.g., a thread‚Äëlocal ‚Äúmock‚Äù scope you define for batch jobs). |
|15| What are the purposes of `BeanFactoryPostProcessor` vs. `BeanPostProcessor`? | `BeanFactoryPostProcessor` runs **before** any bean instances are created and can **modify bean definitions**. `BeanPostProcessor` runs **after** bean instantiation, allowing you to wrap or modify the actual bean instance (e.g., proxy creation). |
|16| How does the `@Conditional` mechanism evaluate multiple conditions? | All declared `@Conditional` annotations are evaluated **AND‚Äëed**; each class implements `Condition` with a `matches` method that can inspect the `Environment`, classpath, existing beans, etc. |
|17| What is the difference between a `FactoryBean` and a factory method `@Bean`? | `FactoryBean` is a **special bean** that, when retrieved, returns the object produced by its `getObject()` method; a factory method `@Bean` is simply a method that returns an object, with no extra indirection. |
|18| Why does Spring treat `java.util.Optional<T>` specially during injection? | An `Optional<T>` tells Spring the dependency is **optional**; if no matching bean exists, Spring injects `Optional.empty()` instead of throwing `NoSuchBeanDefinitionException`. |
|19| How would you implement a custom scope (e.g., ‚Äútenant‚Äù) and register it? | Create a class implementing `Scope` (`get`, `remove`, `registerDestructionCallback`, etc.), then register it with `ConfigurableBeanFactory.registerScope("tenant", new TenantScope())`. The scope can store beans per‚Äëtenant in a `ThreadLocal` or a request attribute. |
|20| Describe how `@Import` works, especially with `ImportSelector` and `ImportBeanDefinitionRegistrar`. | `@Import` can import configuration classes directly, or delegate to an `ImportSelector` that returns a list of fully qualified class names, or to an `ImportBeanDefinitionRegistrar` that programmatically registers bean definitions (useful for conditional, programmatic imports). |
|21| How does Spring resolve `@Value` placeholders with multiple property sources? | It resolves placeholders against the **ordered** `PropertySources` in the `Environment` (system properties ‚Üí environment variables ‚Üí command‚Äëline ‚Üí `application.yml` ‚Üí profile‚Äëspecific files ‚Üí custom `@PropertySource`). The first source that contains the key wins. |
|22| How does Spring detect and report circular references with `@Lazy` and `ObjectFactory`? | The container builds a **dependency graph**; when a bean is being created it marks it as ‚Äúin creation‚Äù. If another bean depends on it, Spring checks the graph; `@Lazy` or `ObjectFactory` break the graph because they defer the actual lookup until after the current bean finishes. |
|23| What are the consequences of `@Configuration(proxyBeanMethods = false)`? | Bean methods are **invoked directly**, so inter‚Äëbean method calls do **not** go through the container; each call creates a **new instance** if the bean is prototype‚Äëscoped, breaking singleton semantics and potentially losing proxying (e.g., `@Transactional`). |
|24| How does `@Autowired(required = false)` differ from using `@Nullable`? | `required = false` tells Spring to ignore the dependency if no matching bean exists, injecting `null`. `@Nullable` marks the *injected value* as allowed to be `null` but still requires the dependency to be resolved; if absent you still get an exception unless `required = false`. |
|25| When and why would you use `@DependsOn`? | To force a bean to be **initialized after** another bean (e.g., a cache that must be warmed before a service starts) ‚Äì useful when the dependency is not expressed via a normal injection. |
|26| Explain the sorting algorithm Spring uses for `Ordered` and `@Order`. | Beans are collected, then sorted by the integer value returned by `Ordered.getOrder()` (or the value in `@Order`). Lower numbers have higher precedence. If two beans have the same order, the order is undefined. |
|27| How does Spring‚Äôs `Environment` abstraction interact with `PropertySources` and profile activation? | `Environment` holds a mutable `MutablePropertySources` list; profiles are activated via `environment.setActiveProfiles(...)`. Beans can use `@Profile` or `@ConditionalOnExpression` that read from the environment to decide activation. |
|28| Discuss pros/cons of externalizing bean definitions using XML vs. Java config in modern Spring Boot. | XML is declarative, external, and can be edited without recompiling; however, Java config provides **type safety**, IDE completion, and is the default in Boot. XML adds an extra parsing step and is rarely needed now. |
|29| What is the role of `SmartInstantiationAwareBeanPostProcessor`? | It allows custom logic **before** bean instantiation (`predictBeanType`), after property population (`postProcessProperties`), and after bean construction (`getEarlyBeanReference`), enabling advanced proxying and injection tricks. |
|30| How does `ApplicationContextAware` differ from `BeanFactoryAware`? | `ApplicationContextAware` gives the full `ApplicationContext` (including message source and event publishing), while `BeanFactoryAware` only provides the underlying `BeanFactory`. Use the former when you need full context features. |

---

## 2Ô∏è‚É£ Aspect‚ÄëOriented Programming (AOP)  

| # | Question | Answer |
|---|----------|--------|
|31| Describe Spring‚Äôs proxy‚Äëcreation strategy: when does it pick JDK dynamic proxies vs. CGLIB? | If the bean implements at least one interface, Spring creates a **JDK proxy**; otherwise (or when `proxyTargetClass = true`) it uses **CGLIB** to subclass the concrete class. |
|32| Explain the lifecycle of an Advice and the order when multiple aspects apply. | Advices are wrapped in **Advisors**, sorted by `@Order`. At invocation Spring builds a chain: `MethodBeforeAdvice` ‚Üí outermost `AroundAdvice` ‚Üí target method ‚Üí `AfterReturning`/`AfterThrowing` (reverse order). Each advice can proceed or abort the chain. |
|33| How can you write a pointcut that references annotation attributes? | Example: `@annotation(myAnn) && @args(.., @MyAnnotation(value = "special"))`. The pointcut binds the annotation instance (`myAnn`) so you can inspect its attributes in the advice method. |
|34| What is the self‚Äëinvocation problem and a non‚Äërefactoring solution? | Calling another `@Transactional` method from the same bean bypasses the proxy, so the advice is not applied. Solve by injecting the bean‚Äôs **own proxy** (`@Autowired private SelfProxy self;`) or by enabling `exposeProxy = true` and using `AopContext.currentProxy()`. |
|35| Compare compile‚Äëtime weaving, load‚Äëtime weaving, and runtime proxy‚Äëbased AOP. | **Compile‚Äëtime** (`ajc`) weaves bytecode before deployment ‚Äì highest performance, can advise any method. **Load‚Äëtime** (`-javaagent`) weaves as classes are loaded ‚Äì similar power but needs a JVM agent. **Runtime** (Spring proxies) is simpler, works with plain JDK, but cannot advise final methods or internal calls. |
|36| How does `@EnableAspectJAutoProxy(proxyTargetClass = true, exposeProxy = true)` affect advice execution? | `proxyTargetClass = true` forces CGLIB subclassing even if interfaces exist. `exposeProxy = true` stores the current proxy in a thread‚Äëlocal, allowing `AopContext.currentProxy()` for self‚Äëinvocation handling. |
|37| How does `@Order` on aspects influence advice precedence? | Aspects with **lower** order values have **higher** precedence (executed earlier). For `@Around` advice, the lower‚Äëorder aspect becomes the **outermost** wrapper. |
|38| What is `AdviceBinding` in Spring AOP? | It is the internal representation that ties an **Advice** to the **method matcher** (pointcut). The `AdvisorAdapterRegistry` converts a generic `Advice` into an `Advisor` that Spring‚Äôs proxy infrastructure can understand. |
|39| How would you implement annotation‚Äëdriven caching using a custom Aspect? | Create a `@CacheResult` annotation, write an `@Around` advice that checks a `CacheManager` for a key derived from method args, returns cached value if present, otherwise proceeds and stores the result. Use `@Order(Ordered.LOWEST_PRECEDENCE)` to run after other advices. |
|40| What are the limitations of Spring‚Äôs proxy‚Äëbased AOP for final/private methods? | Proxies subclass the target class (CGLIB) or implement interfaces (JDK). **Final methods** cannot be overridden, **private methods** are not intercepted because they‚Äôre not part of the public contract; thus advices never see them. Use AspectJ LTW if you need to advise such methods. |
|41| How does Spring integrate with AspectJ‚Äôs `@AspectJ` style? | `@EnableAspectJAutoProxy` registers an `AnnotationAwareAspectJAutoProxyCreator` that scans the context for `@Aspect` beans, creates Spring AOP advisors from their `@Before/@After/@Around` annotations, and weaves them via proxies. |
|42| When would you prefer AspectJ LTW over Spring‚Äôs proxy‚Äëbased AOP in production? | When you must advise **final methods**, **private methods**, library classes you cannot proxy, or need **compile‚Äëtime guarantees** (e.g., for security audits). LTW provides full AspectJ power at the cost of a JVM agent and slightly longer startup. |
|43| Explain the role of `AdvisorAdapterRegistry`. | It holds adapters that translate various `Advice` types (`MethodBeforeAdvice`, `AroundAdvice`, `ThrowsAdvice`) into `Advisor`s that the proxy factory can understand, making the AOP infrastructure extensible. |
|44| How can you expose the current `JoinPoint` to downstream services without breaking encapsulation? | Pass a **custom context object** (e.g., a `ThreadLocal`‚Äëbased `RequestContext`) populated in the advice, then inject that context where needed. This avoids leaking AspectJ classes into business code. |
|45| What happens if an exception is thrown from an `@Around` advice that also has `@Transactional`? | The exception propagates to the proxy chain; if the exception matches the transaction‚Äôs rollback rules, the transaction is rolled back. The advice can also explicitly call `TransactionAspectSupport.currentTransactionStatus().setRollbackOnly()`. |
|46| How does `AnnotationAwareAspectJAutoProxyCreator` differ from the plain `AspectJAutoProxyCreator`? | The *annotation‚Äëaware* version also processes `@Aspect` beans and respects Spring‚Äôs `@Order`, whereas the plain one only works with XML‚Äëdefined `aspect` tags. |
|47| Describe ordering among `@Before`, `@AfterReturning`, and `@AfterThrowing` advices. | All advices are ordered by their aspect‚Äôs `@Order`. Within a single aspect, `@Before` runs first, then the target method, followed by `@AfterReturning` (if method returns normally) or `@AfterThrowing` (if an exception occurs); `@After` (if present) runs in both cases. |
|48| Can an Aspect apply only to beans annotated with a meta‚Äëannotation? Show the pointcut. | Yes. Example: `@Pointcut("@within(com.example.MyMetaAnnotation) || @annotation(com.example.MyMetaAnnotation)")`. This matches any bean whose class or method carries the meta‚Äëannotation. |
|49| How does Spring handle exceptions thrown from advice (e.g., an `@Around` advice)? | The exception propagates up the proxy chain. If the advice is part of a transaction, the transaction manager decides whether to roll back based on the exception type. The original target method is **not** invoked. |
|50| What is required to enable load‚Äëtime weaving (`@EnableLoadTimeWeaving`)? | Add `@EnableLoadTimeWeaving` and launch the JVM with `-javaagent:path/to/spring-instrument-{version}.jar` (or use a container that provides the agent). Spring then registers a `LoadTimeWeaver` to weave AspectJ aspects at class load. |

---

## 3Ô∏è‚É£ Transaction Management  

| # | Question | Answer |
|---|----------|--------|
|51| List all transaction propagation types with a `REQUIRES_NEW` use case. | `REQUIRED`, `REQUIRES_NEW`, `SUPPORTS`, `NOT_SUPPORTED`, `MANDATORY`, `NEVER`, `NESTED`. *Use `REQUIRES_NEW` for audit logging so the audit record commits even if the main transaction rolls back.* |
|52| `JpaTransactionManager` vs. `DataSourceTransactionManager` flush behavior. | `JpaTransactionManager` calls `EntityManager.flush()` on commit, ensuring pending JPA changes are written. `DataSourceTransactionManager` works on raw JDBC and does **not** know about the JPA persistence context. |
|53| What happens when a checked exception is thrown inside `@Transactional`? | By default Spring **does not roll back** on checked exceptions; it only rolls back on unchecked (`RuntimeException`) or `Error`. You can specify `rollbackFor = MyCheckedException.class`. |
|54| Interaction between `@Transactional` and `@Async`. | `@Async` runs in a separate thread, thus it **cannot see** the caller‚Äôs transaction. Make the async method itself `@Transactional` or use `TransactionTemplate` inside the async block to start a new transaction. |
|55| When does Spring create a new transaction vs. join an existing one? | If **no** transaction exists, Spring creates one. If a transaction exists, the behavior depends on the propagation: `REQUIRED` joins, `REQUIRES_NEW` starts a new one, `NESTED` creates a save‚Äëpoint, etc. |
|56| What is `TransactionSynchronizationManager`? | It holds thread‚Äëlocal resources (e.g., the current `Connection` or `EntityManager`) and synchronization callbacks, enabling multiple resources to participate in the same logical transaction. |
|57| Effect of `@Transactional(readOnly = true)` on Hibernate and DB connections. | Hibernate skips dirty‚Äëchecking and flushes, and many databases can apply read‚Äëonly optimisations (e.g., using a replica). It also hints the connection pool that the transaction won‚Äôt modify data. |
|58| How to programmatically mark a transaction for rollback without throwing? | Call `TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();` inside the transactional method. |
|59| How does Spring integrate with JTA for distributed transactions? | By configuring a `JtaTransactionManager` (or a vendor‚Äëspecific manager like Atomikos) that delegates to the JTA transaction manager, allowing multiple `DataSource`s and `EntityManager`s to participate in a single global transaction. |
|60| Consequences of using `PROPAGATION_NESTED` with `DataSourceTransactionManager`. | `NESTED` only works with **JDBC** connections that support savepoints; the transaction manager creates a savepoint for the nested transaction. If the database doesn‚Äôt support savepoints, an exception occurs. |
|61| How does Spring handle transaction timeout settings? | The timeout value (seconds) is passed to the underlying `Connection`/`EntityManager`. If the transaction exceeds the timeout, Spring throws `TransactionTimedOutException` and rolls back. |
|62| When would you use `@TransactionalEventListener` and its execution phases? | To react to events **after** a transaction commits (`AFTER_COMMIT`) or **before** it rolls back (`AFTER_ROLLBACK`). Useful for sending messages only when the DB changes are guaranteed. |
|63| Explain `RollbackRuleAttribute` in declarative transaction config. | It defines which exception classes trigger rollback (`new RollbackRuleAttribute(MyException.class)`). The `RuleBasedTransactionAttribute` aggregates these rules to decide rollback vs. commit. |
|64| When would you prefer `TransactionTemplate` over `@Transactional`? | For **programmatic** transaction control inside a method that already has transactional context, or when you need fine‚Äëgrained commit/rollback decisions inside a single method body. |
|65| Describe the ‚Äútransaction‚Äëper‚Äërequest‚Äù pattern in Spring MVC. | A `OpenEntityManagerInViewFilter` (or `OpenEntityManagerInViewInterceptor`) opens a JPA `EntityManager` for the entire HTTP request, allowing lazy loading in view rendering. |
|66| How does `@Transactional` on a `private` method behave? | Spring‚Äôs proxy cannot intercept `private` methods; therefore the annotation is ignored and the method runs **without** transactional semantics. |
|67| Impact of `@EnableTransactionManagement(mode = AdviceMode.ASPECTJ)`. | Transactional advice is woven by **AspectJ** (compile‚Äë or load‚Äëtime) instead of Spring proxies, allowing transaction management on `final` classes/methods and eliminating proxy‚Äërelated limitations. |
|68| How to suppress transaction rollback for a specific exception? | Use `@Transactional(noRollbackFor = MyException.class)` or `noRollbackForName = "com.example.MyException"`. |
|69| Pros/cons of optimistic vs. pessimistic locking in Spring Data JPA. | **Optimistic** (`@Version`) avoids DB locks, suitable for low‚Äëcontention writes; **pessimistic** (`LockModeType.PESSIMISTIC_WRITE`) obtains a row lock, safe for high‚Äëcontention but can deadlock and reduces concurrency. |
|70| How do `@Commit` and `@Rollback` work in Spring‚Äôs testing framework? | When placed on a test method, `@Commit` forces the transaction to **commit** after the test, while `@Rollback` (default) rolls it back, keeping the database clean between tests. |
|71| What is `ChainedTransactionManager` and why use it? | It combines multiple `PlatformTransactionManager`s (e.g., one for JPA, another for Mongo) into a single logical transaction, delegating commit/rollback to each manager in order. |
|72| When is `@Transactional(propagation = MANDATORY)` appropriate? | When a method **must** be called inside an existing transaction; otherwise Spring throws `IllegalTransactionStateException`. Useful for internal service methods that should never be invoked outside a transaction. |
|73| Purpose of `TransactionAwareDataSourceProxy`. | It wraps a regular `DataSource` and ensures that code obtaining a connection via `DataSource.getConnection()` participates in the current Spring transaction, even if that code isn‚Äôt aware of Spring. |
|74| When would you disable Spring‚Äôs default transaction synchronization? | In **non‚Äëtransactional** batch jobs where you deliberately manage your own connections, to avoid the overhead of thread‚Äëlocal sync resources. Risks include losing automatic rollback/commit handling. |
|75| Consequences of using `Isolation.SERIALIZABLE` in a Spring app. | Guarantees full transaction isolation (prevents phantom reads) but can cause **significant locking** and reduced throughput; appropriate only for critical sections where consistency trumps performance. |

---

## 4Ô∏è‚É£ Spring Boot  

| # | Question | Answer |
|---|----------|--------|
|76| What three meta‚Äëannotations compose `@SpringBootApplication`? | `@Configuration` (Java config), `@EnableAutoConfiguration` (import auto‚Äëconfig classes), `@ComponentScan` (search the package of the annotated class). |
|77| How does auto‚Äëconfiguration discover candidate classes? | Spring Boot reads `META-INF/spring.factories` for the `EnableAutoConfiguration` key; each listed class is a candidate that may be imported if its `@Conditional` annotations evaluate to true. |
|78| Order of property‚Äësource resolution in Spring Boot. | 1Ô∏è‚É£ `RandomValuePropertySource` ‚Üí 2Ô∏è‚É£ `devtools` overrides ‚Üí 3Ô∏è‚É£ `application-{profile}.properties/yml` ‚Üí 4Ô∏è‚É£ `application.properties/yml` ‚Üí 5Ô∏è‚É£ `@PropertySource` ‚Üí 6Ô∏è‚É£ OS env vars ‚Üí 7Ô∏è‚É£ System properties ‚Üí 8Ô∏è‚É£ Command‚Äëline args. |
|79| Disable a specific auto‚Äëconfiguration without removing the whole starter. | Set `spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration` (or any fully‚Äëqualified class) in `application.yml`/`properties`. |
|80| Purpose of `META-INF/spring.components`. | Pre‚Äëdeclares candidate component classes for classic class‚Äëpath scanning (used mainly with legacy XML configuration). |
|81| How does `@ConditionalOnMissingBean` differ from `@ConditionalOnBean`? | `@ConditionalOnMissingBean` loads the auto‚Äëconfig *only if* a bean of the specified type **does not** already exist; `@ConditionalOnBean` does the opposite, loading only when the bean **does** exist. |
|82| Difference between `FactoryBean` and a factory‚Äëmethod `@Bean`. | `FactoryBean` is a **special bean** whose `getObject()` returns the actual bean to expose; a factory‚Äëmethod `@Bean` simply returns the object directly, with no extra indirection. |
|83| When to use `@ConfigurationProperties` vs. `@Value`. | `@ConfigurationProperties` groups related properties into a POJO (type‚Äësafe, supports validation). `@Value` is for one‚Äëoff placeholders or SpEL expressions. |
|84| Programmatically customise the embedded servlet container. | Define a `WebServerFactoryCustomizer<TomcatServletWebServerFactory>` bean and set properties (e.g., port, SSL, thread pool) inside its `customize` method. |
|85| Role of `SpringApplicationRunListeners`. | They are callbacks invoked at key points of the `SpringApplication` lifecycle (starting, environment prepared, context prepared, etc.). Custom listeners can react to these events (e.g., logging, metrics). |
|86| How does Spring Boot decide the main class for an executable jar? | It reads the `Main-Class` attribute from the MANIFEST (`org.springframework.boot.loader.JarLauncher`) which then looks for a class with `public static void main(String[])` annotated with `@SpringBootApplication`. |
|87| Effect of `spring.main.web-application-type=NONE`. | Disables any web‚Äëserver auto‚Äëconfiguration; the application runs as a **non‚Äëweb** (CLI) app, useful for batch jobs or utilities. |
|88| Explain `SpringBootTest.WebEnvironment` values. | `MOCK` ‚Äì mock servlet environment, no real server; `RANDOM_PORT` ‚Äì starts embedded server on a random port; `DEFINED_PORT` ‚Äì uses the port defined in properties; `NONE` ‚Äì no web environment at all. |
|89| Conditionally enable a bean based on a Spring profile without `@Profile`. | Use `@ConditionalOnExpression("'${spring.profiles.active}'.contains('myprofile')")` or `@ConditionalOnProperty` that is set only for that profile. |
|90| How to add a custom actuator endpoint? | Implement `Endpoint` or extend `AbstractEndpoint`, annotate with `@Endpoint(id = "myEndpoint")`, register as a bean, and optionally expose via `@ReadOperation`, `@WriteOperation`. |
|91| Purpose of the `spring-boot-maven-plugin` `repackage` goal. | It repackages the built JAR with all dependencies and a launch script, turning it into an **executable fat‚Äëjar** (or war). |
|92| How does the Spring Boot banner feature work? | At startup `BannerPrinter` reads `banner.txt`/`banner.gif` from the classpath (or default ASCII banner) and prints it; you can replace it with a custom file or disable via `spring.main.banner-mode=off`. |
|93| Use‚Äëcases for `ApplicationRunner` vs. `CommandLineRunner`. | Both run after the context is ready. `ApplicationRunner` receives `ApplicationArguments` (parsed into option‚Äëargs and non‚Äëoption‚Äëargs). `CommandLineRunner` receives the raw `String[]`. Pick the one that matches the needed argument handling. |
|94| How does `@ConditionalOnProperty` evaluate boolean properties? | It reads the property value (as a string). If the property is **missing**, the condition fails unless `matchIfMissing = true`. It treats `"true"` (case‚Äëinsensitive) as true; any other value is false. |
|95| Role of `SmartLifecycle` in complex start‚Äëstop ordering. | Extends `Lifecycle` with `isAutoStartup()`, `stop(Runnable callback)`, and a `phase` value. Beans with **lower** phase start earlier and stop later, enabling fine‚Äëgrained ordering. |
|96| Difference between `@RestController` and `@Controller`. | `@RestController` = `@Controller + @ResponseBody` on every method (JSON/XML output). `@Controller` returns view names and is used with server‚Äëside templating. |
|97| How does `WebMvcConfigurer` differ from `WebFluxConfigurer`? | `WebMvcConfigurer` customises the **Servlet‚Äëbased** Spring MVC stack; `WebFluxConfigurer` customises the **reactive** WebFlux stack (different return types, non‚Äëblocking I/O). |
|98| Steps to externalise logging configuration (Logback) in a Spring Boot jar. | Place `logback-spring.xml` on the classpath (outside the jar or in `src/main/resources`), reference external properties via `${LOG_PATH}` and set `logging.config=classpath:logback-spring.xml` or `-Dlogging.config=...` at launch. |
|99| Remote restart capabilities of `spring-boot-devtools` and security concerns. | DevTools can listen on a separate port for a trigger request (`/restart`). Exposing this port publicly can allow remote code reload; therefore it is **disabled by default** and should be bound to `localhost` only. |
|100| How does `@EnableConfigurationProperties` work internally? | It registers a `ConfigurationPropertiesBindingPostProcessor` bean that binds external `@ConfigurationProperties` classes to the environment after the bean definitions are loaded. |
|101| Configure a custom `Jackson` `ObjectMapper` without affecting auto‚Äëconfiguration. | Declare a `@Bean` of type `Jackson2ObjectMapperBuilderCustomizer` (or `ObjectMapper` with `@Primary`) that applies additional modules; Spring Boot still creates the default mapper and applies your customizer on top of it. |
|102| Impact of `spring.main.allow-bean-definition-overriding`. | When `true`, a later bean definition with the same name overwrites the previous one (useful for test stubs). When `false` (default), duplicate bean names cause a `BeanDefinitionOverrideException`. |
|103| Purpose of `META-INF/spring.handlers` and `META-INF/spring.schemas`. | They map XML namespace URIs to `NamespaceHandler` implementations (`spring.handlers`) and to XSD schema files (`spring.schemas`), enabling Spring‚Äôs XML configuration to understand custom namespaces. |
|104| How can a library use `@ImportAutoConfiguration`? | The library defines an auto‚Äëconfiguration class and annotates it with `@AutoConfiguration` (or declares it in `spring.factories`). Consumers can then import it explicitly via `@ImportAutoConfiguration(MyAutoConfig.class)` if they don‚Äôt want it auto‚Äëenabled. |
|105| How does a `HealthIndicator` contribute to `/actuator/health`? | Each `HealthIndicator` bean returns a `Health` object; the `HealthEndpoint` aggregates them into a composite status (UP/DOWN) and adds custom details. |
|106| When would you use `SpringApplicationBuilder` instead of `SpringApplication.run()`? | To **chain** multiple sources, apply **customizers** (e.g., set additional listeners, banner mode), or to create **child contexts** (e.g., for a Hop‚Äëby‚ÄëHop migration). |
|107| Explain `@ConditionalOnExpression` with an example using SpEL. | `@ConditionalOnExpression("${my.feature.enabled} && T(java.lang.Math).random() < 0.5")` enables the bean only when the property is true **and** a random check passes (demonstrates SpEL usage). |
|108| Share configuration properties between a library and an application using `@ConfigurationProperties`. | Define a POJO in the library annotated with `@ConfigurationProperties(prefix="mylib")`. The application declares it as a bean (or uses `@EnableConfigurationProperties`) and provides the actual values in its `application.yml`. |
|109| Steps to enable graceful shutdown in a Spring Boot web app. | Set `server.shutdown=graceful` and optionally `spring.lifecycle.timeout-per-shutdown-phase=30s`. Spring will stop accepting new requests, wait for ongoing requests to finish, then close the `ApplicationContext`. |
|110| Key `SpringApplication` events and when they are published. | `ApplicationStartingEvent` (early, before environment), `ApplicationEnvironmentPreparedEvent`, `ApplicationPreparedEvent`, `ApplicationStartedEvent` (context refreshed), `ApplicationReadyEvent` (app is ready to service requests), `ApplicationFailedEvent`. |
|111| How does `RestTemplateBuilder` simplify `RestTemplate` creation? | It pre‚Äëconfigures the template with message converters, error handlers, request factories, and any `ClientHttpRequestInterceptor` beans defined in the context, giving you a fully configured `RestTemplate` with one line. |
|112| Purpose of `HealthEndpointWebExtension` and customizing its JSON response. | It adapts the core `HealthEndpoint` for the web layer, adding actuator‚Äëspecific metadata (e.g., `status`, `components`). You can customize by providing a bean that implements `HealthIndicator` or by adding `HealthEndpointWebExtension` that adds extra fields. |
|113| Effect of `spring.task.scheduling.pool.size` and underlying implementation. | It sets the core pool size of the `ThreadPoolTaskScheduler` used by `@Scheduled` tasks. The scheduler uses a `java.util.concurrent.ScheduledThreadPoolExecutor` under the hood. |
|114| How does Spring Boot support multiple `DataSource`s? | Declare each `DataSource` as a `@Bean` (with `@Primary` for the default), then create separate `JdbcTemplate`/`EntityManagerFactory` beans referencing the appropriate `DataSource`. Spring Boot‚Äôs auto‚Äëconfiguration will back‚Äëoff for the non‚Äëprimary ones. |
|115| Effect of `spring.main.web-application-type=REACTIVE`. | Spring Boot will auto‚Äëconfigure the **WebFlux** stack (reactive netty server) instead of the servlet stack, and beans like `WebMvcConfigurer` are ignored. |
|116| How does `@ConditionalOnJava` work? | It checks `System.getProperty("java.version")` against the required version (e.g., `@ConditionalOnJava(value = JavaVersion.EIGHT, range = Range.EQUAL_OR_NEWER)`). Useful for providing different beans for different JDKs. |
|117| How does `@ConditionalOnJndi` decide bean creation? | It attempts a JNDI lookup for the supplied name; if the lookup succeeds (resource exists) the condition matches, otherwise the bean is not created. |
|118| Role of `HealthContributorRegistry` and health endpoint groups. | It holds all `HealthIndicator` and `HealthContributor` beans, allowing the `/actuator/health` endpoint to group them (e.g., `liveness`, `readiness`) and expose only selected contributors per group. |
|119| Conditionally enable a bean only when a class is present on the classpath? | Use `@ConditionalOnClass(name = "com.example.OptionalFeature")`. The bean will be created only if that class can be loaded. |
|120| Purpose of `@ConditionalOnMissingClass`. | The opposite of `@ConditionalOnClass`; it creates the bean **only when** the specified class **cannot** be found, useful for providing fall‚Äëbacks. |

---

## 5Ô∏è‚É£ Spring Data & Persistence  

| # | Question | Answer |
|---|----------|--------|
|121| How does Spring Data generate repository implementations from method names? | It parses the method name (e.g., `findByLastnameAndAgeGreaterThan`) into a **QueryCreationContext**, builds a JPQL/SQL query, and executes it via `EntityManager`. |
|122| Explain `@EntityGraph` and solving the N+1 problem. | `@EntityGraph(attributePaths = {"orders","address"})` tells Hibernate to fetch the listed associations eagerly in a single JOIN, eliminating extra SELECTs that cause N+1. |
|123| Difference between `CrudRepository`, `PagingAndSortingRepository`, `JpaRepository`. | `CrudRepository` ‚Äì basic CRUD. `PagingAndSortingRepository` ‚Äì adds pagination & sorting. `JpaRepository` ‚Äì extends both and adds JPA‚Äëspecific methods (`flush`, `saveAndFlush`). |
|124| How does `@Modifying` affect flush mode? | By default the modifying query runs with `FlushModeType.AUTO`. Setting `flushAutomatically = true` forces an **immediate flush** before execution, ensuring pending changes are persisted. |
|125| Native SQL vs. JPQL with `@Query`. | Native SQL can use DB‚Äëspecific syntax & functions but bypasses JPQL validation and automatic result mapping. JPQL is portable, type‚Äësafe, and integrates with JPA entity mapping. |
|126| Purpose of `JpaSpecificationExecutor`. | Allows building **dynamic, type‚Äësafe predicates** using the Criteria API (`Specification<T>`), enabling complex queries without hard‚Äëcoding JPQL strings. |
|127| Register a custom `RepositoryBaseClass` for common methods. | Extend `JpaRepositoryImpl`, provide it via `@EnableJpaRepositories(repositoryBaseClass = MyBaseRepoImpl.class)`. All repositories will inherit the custom methods. |
|128| Effect of `@Transactional(readOnly = true)` on a repository method. | Spring opens the transaction in read‚Äëonly mode; Hibernate skips dirty checking, and many DBs can optimise the transaction (e.g., using replica). |
|129| How does `@BatchSize` work and when to use it? | It tells Hibernate to fetch collections or lazy associations in batches of the specified size, reducing the number of SELECTs when iterating large result sets. |
|130| Difference between `@MappedSuperclass` and `@Inheritance(strategy = SINGLE_TABLE)`. | `@MappedSuperclass` provides common mapping information but **does not** create a table; its fields are mapped in subclasses. `@Inheritance(SINGLE_TABLE)` creates **one** table for the whole hierarchy, using a discriminator column. |
|131| Role of `AuditingEntityListener` and enabling it. | It automatically populates audit fields (`@CreatedDate`, `@LastModifiedDate`, `@CreatedBy`, `@LastModifiedBy`). Enable with `@EnableJpaAuditing` and annotate the entity fields. |
|132| How do projection interfaces differ from DTO constructor expressions? | Projection interfaces let Spring Data map selected columns directly onto an interface (no DTO class needed). DTO constructors (`new com.foo.Dto(e.id, e.name)`) require a concrete class and can include calculated fields. |
|133| Pitfalls of `FetchType.EAGER` on collections and mitigation. | Eager collections cause **Cartesian product** queries and can blow memory. Mitigate by using `@EntityGraph`, `JOIN FETCH` in queries, or switching to `LAZY` + explicit fetch strategies. |
|134| How does `@Lock(LockModeType.PESSIMISTIC_WRITE)` work? | It instructs the JPA provider to acquire a **database row lock** (`SELECT ‚Ä¶ FOR UPDATE`) when reading the entity, preventing concurrent updates until the transaction commits. |
|135| Override the default `EntityManager` used by repositories. | Define a `@Bean` of type `EntityManagerFactory` (or `LocalContainerEntityManagerFactoryBean`) with a custom name and reference it via `@EnableJpaRepositories(entityManagerFactoryRef = "myEmf")`. |
|136| Purpose of `@EnableJpaRepositories` `repositoryFactoryBeanClass`. | Allows you to plug a custom `RepositoryFactoryBean` (e.g., one that adds extra behavior or supports non‚Äëstandard query methods). |
|137| How does `Querydsl` integrate with Spring Data JPA? | By enabling `QuerydslPredicateExecutor` on a repository; Spring Data creates a `JPAQueryFactory` that can execute `Predicate`s built with the generated Q‚Äëclasses. |
|138| Effect of `@Modifying(clearAutomatically = true)`. | After the modifying query executes, the persistence context is **cleared**, forcing subsequent reads to hit the database (helps avoid stale data after bulk updates). |
|139| How does `@RedisHash` work in Spring Data Redis? | It marks a class as a Redis hash, persisting its fields as a Redis hash map keyed by the class‚Äôs id; the repository works similarly to JPA but against Redis. |
|140| Difference between `EntityManager.persist` and `merge`. | `persist` puts a **new** entity into the persistence context; it must not have an identifier already set. `merge` copies the state of a **detached** entity into a managed instance, returning the managed copy. |
|141| How does Spring Data REST expose repositories as HATEOAS endpoints? | It registers a `RepositoryRestController` for each repository, automatically mapping CRUD URLs and adding HAL‚Äëstyle links (`self`, `profile`, etc.) based on the entity model. |
|142| Impact of `spring.jpa.open-in-view` and the ‚ÄúOpen Session in View‚Äù pattern. | When enabled, a JPA `EntityManager` stays open for the whole web request, allowing lazy loading in view rendering. This can hide N+1 problems and tie the view layer to persistence. |
|143| What are `TransactionTemplate` and `JpaTemplate`, and why are they legacy? | They provide programmatic transaction handling before annotation‚Äëbased transaction management became ubiquitous. `JpaTemplate` predates JPA‚Äôs native API; Spring now recommends using `EntityManager` directly or repositories. |
|144| Configure multi‚Äëtenant schema‚Äëper‚Äëtenant with Spring Data JPA. | Implement a `CurrentTenantIdentifierResolver` for Hibernate, supply a `MultiTenantConnectionProvider` that switches the schema based on a `ThreadLocal` tenant identifier, and set `hibernate.multiTenancy=SCHEMA`. |
|145| Role of `@Repository` in exception translation. | Spring wraps persistence‚Äëspecific exceptions (e.g., `SQLException`) in its own `DataAccessException` hierarchy via `PersistenceExceptionTranslationPostProcessor`. |
|146| Efficiently batch‚Äëinsert 10,000 rows with Spring Data JPA. | Use `EntityManager.flush()` + `clear()` every **N** (e.g., 500) rows, or enable `hibernate.jdbc.batch_size` and let Hibernate batch the inserts. |
|147| Use of `@DynamicUpdate` and `@DynamicInsert` in Hibernate. | They tell Hibernate to generate **UPDATE/INSERT** statements that include only the changed columns (or non‚Äënull columns), reducing write traffic but adding a small overhead for dirty checking. |
|148| Purpose of `JpaTransactionManager.isJpaDialectPresent` during init. | It checks whether a specific `JpaDialect` (e.g., Hibernate) is on the classpath; if not, the transaction manager falls back to a generic JPA dialect. |
|149| How does `@QueryHints` affect query execution? | It passes vendor‚Äëspecific hints (e.g., `org.hibernate.fetchSize`) to the JPA provider, allowing fine‚Äëtuned performance tweaks without altering the query itself. |
|150| Interaction of `EntityManager.flush()` with `@Transactional` boundaries. | Within a transaction, `flush()` forces pending changes to be written to the DB but **does not** commit. The transaction still controls commit/rollback at the method exit. |

---

## 6Ô∏è‚É£ Spring Security  

| # | Question | Answer |
|---|----------|--------|
|151| List the default filters in Spring Security‚Äôs chain and their purpose. | 1Ô∏è‚É£ `SecurityContextPersistenceFilter` ‚Äì restores `SecurityContext`. 2Ô∏è‚É£ `HeaderWriterFilter` ‚Äì adds security headers. 3Ô∏è‚É£ `CsrfFilter`. 4Ô∏è‚É£ `LogoutFilter`. 5Ô∏è‚É£ `UsernamePasswordAuthenticationFilter`. 6Ô∏è‚É£ `BasicAuthenticationFilter`. 7Ô∏è‚É£ `RequestCacheAwareFilter`. 8Ô∏è‚É£ `SecurityContextHolderAwareRequestFilter`. 9Ô∏è‚É£ `AnonymousAuthenticationFilter`. üîü `SessionManagementFilter`. 1Ô∏è‚É£1Ô∏è‚É£ `ExceptionTranslationFilter`. 1Ô∏è‚É£2Ô∏è‚É£ `FilterSecurityInterceptor`. |
|152| How does `@PreAuthorize` evaluate SpEL and what‚Äôs available? | The expression can reference `authentication`, `principal`, method arguments (`#param`), and utility methods like `hasRole()`, `hasAuthority()`. Spring creates a `MethodSecurityExpressionHandler` that supplies the evaluation context. |
|153| `SecurityContextHolderStrategy` implementations and when to use each. | `MODE_THREADLOCAL` (default) ‚Äì isolated per thread. `MODE_INHERITABLETHREADLOCAL` ‚Äì child threads inherit the context (useful for async tasks). `MODE_GLOBAL` ‚Äì a single static context (rare, for legacy code). |
|154| Implement stateless JWT authentication in Spring Security‚ÄØ6. | Add `http.sessionManagement().sessionCreationPolicy(STATELESS)`, configure a `JwtDecoder` bean, and register a `OncePerRequestFilter` that extracts the token, validates it, builds a `UsernamePasswordAuthenticationToken`, and stores it in `SecurityContextHolder`. |
|155| Why use `PasswordEncoderFactories.createDelegatingPasswordEncoder()`? | It stores the **id** of the encoder (`{bcrypt}`) in the hash, allowing transparent migration to newer algorithms while still supporting older stored passwords. |
|156| How to secure a reactive (WebFlux) service with method‚Äëlevel security? | Add `@EnableMethodSecurity` (or `@EnableReactiveMethodSecurity`), then use `@PreAuthorize` on handler methods. The `ReactorContext` carries the `Authentication` for non‚Äëblocking evaluation. |
|157| How does CSRF protection work and when is it safe to disable it? | Spring generates a token per session and expects it as a hidden field or header. It can be disabled for **stateless APIs** (e.g., JWT‚Äëbased) where the client cannot store cookies, or for non‚Äëbrowser clients. |
|158| Role of `AuthenticationProvider` and wiring a custom LDAP provider. | Implement `AuthenticationProvider.authenticate()`, return a populated `Authentication` object, and register the bean. Spring‚Äôs `LdapAuthenticationProvider` can be configured via `AuthenticationManagerBuilder.ldapAuthentication()`. |
|159| Effect of `http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)`. | No `HttpSession` will be created or used; each request must contain all authentication data (e.g., a token). This is required for true RESTful services. |
|160| Difference between `@RolesAllowed` and `@PreAuthorize`. | `@RolesAllowed` is JSR‚Äë250, only checks **role** strings (`hasRole`). `@PreAuthorize` uses full SpEL, allowing complex expressions (`hasAuthority('ADMIN') && #id == authentication.principal.id`). |
|161| Secure Actuator endpoints (e.g., `/actuator/health`) with role‚Äëbased access. | Expose the endpoint (`management.endpoints.web.exposure.include=*`) and then configure `http.authorizeHttpRequests().requestMatchers(EndpointRequest.to(HealthEndpoint.class)).hasRole("ADMIN")`. |
|162| How does `FilterSecurityInterceptor` decide authorization? | It obtains the `SecurityMetadataSource` (URL‚Äëto‚Äëattributes mapping), retrieves the required attributes, and delegates to an `AccessDecisionManager` (e.g., `AffirmativeBased`) which evaluates the current `Authentication`. |
|163| Difference between `UserDetailsService` and `UserDetailsManager`. | `UserDetailsService` only loads a user by username. `UserDetailsManager` extends it and adds CRUD operations for managing users (create, update, delete). |
|164| How does `OAuth2LoginAuthenticationFilter` handle the authorization code flow? | It intercepts the callback URL, extracts the `code`, exchanges it for an access token via the `OAuth2AccessTokenResponseClient`, then builds an `OidcUser`/`OAuth2User` and stores it in the `SecurityContext`. |
|165| Configure a resource server to validate RSA‚Äësigned JWTs. | Define `spring.security.oauth2.resourceserver.jwt.jwk-set-uri` (or provide a `JwtDecoder` bean using `NimbusJwtDecoder.withPublicKey(rsaKey).build()`). The decoder verifies signature and claims. |
|166| Difference between `@EnableGlobalMethodSecurity` and `@EnableMethodSecurity`. | `@EnableGlobalMethodSecurity` is deprecated; `@EnableMethodSecurity` is the modern, unified way (covers both `@PreAuthorize` and JSR‚Äë250). |
|167| `GrantedAuthority` vs. `AuthorityUtils` ‚Äì typical usage. | `GrantedAuthority` is the interface representing a single authority string. `AuthorityUtils` is a helper that creates a collection of `GrantedAuthority` from a comma‚Äëseparated string. |
|168| Explain the `SecurityFilterChain` bean approach introduced in Spring Security‚ÄØ5.4. | Instead of extending `WebSecurityConfigurerAdapter`, you now define a `@Bean SecurityFilterChain` that receives an `HttpSecurity` and returns `http.build()`. This is functional, type‚Äësafe, and allows multiple chains. |
|169| Implications of upgrading a `PasswordEncoder` (e.g., BCrypt ‚Üí Argon2). | Existing passwords stay stored with their original `{bcrypt}` id. New passwords will be encoded with `{argon2}`. The delegating encoder will automatically select the correct algorithm per stored hash. |
|170| Customise the `AuthenticationEntryPoint` to return JSON errors for REST APIs. | Implement `AuthenticationEntryPoint` (e.g., `RestAuthenticationEntryPoint`) that writes a JSON body with status 401, and register it via `http.exceptionHandling().authenticationEntryPoint(myEntryPoint)`. |
|171| Purpose of `@AuthenticationPrincipal` and difference from accessing `SecurityContext`. | `@AuthenticationPrincipal` extracts the **principal** object directly as a method argument, a convenience over `SecurityContextHolder.getContext().getAuthentication().getPrincipal()`. |
|172| How does `http.oauth2ResourceServer().jwt()` configure opaque‚Äëtoken validation? | It sets up a `JwtAuthenticationProvider` that validates the token‚Äôs **introspection endpoint** (if you configure `introspection-uri`), converting the response into an `Authentication` object. |
|173| How does `CsrfTokenRepository` store tokens and trade‚Äëoffs? | The default `HttpSessionCsrfTokenRepository` stores the token in the `HttpSession`. A `CookieCsrfTokenRepository` stores it in a cookie (stateless, works with SPAs) but may be vulnerable to XSS if not `HttpOnly`. |
|174| How does ‚ÄúRemember‚ÄëMe‚Äù authentication work and security considerations? | Spring stores a persistent token (or hashed series + token) in a cookie; on subsequent requests, it re‚Äëauthenticates the user. Risks: stolen cookie ‚Üí session hijacking; mitigations include `tokenValiditySeconds`, `secure` flag, and rotating tokens. |
|175| What is `WebExpressionAuthorizationManager` and how does it evaluate expressions? | It evaluates Spring‚ÄëEL expressions (e.g., `"hasIpAddress('192.168.0.0/16')"`). It builds a `WebSecurityExpressionRoot` with request, authentication, and method‚Äëlevel data, then evaluates the expression against it. |

---

## 7Ô∏è‚É£ Spring Cloud & Microservices  

| # | Question | Answer |
|---|----------|--------|
|176| Difference between `@EnableDiscoveryClient` and `@EnableEurekaClient`. | `@EnableDiscoveryClient` works with **any** supported registry (Eureka, Consul, Zookeeper). `@EnableEurekaClient` is Eureka‚Äëspecific and does nothing extra beyond the generic version. |
|177| How does Spring Cloud Config Server externalise configuration and handle refresh? | The server reads from a Git (or file system) repo and serves `/{application}/{profile}` endpoints. Clients use `@RefreshScope` beans; invoking `/actuator/refresh` (or Spring Cloud Bus) re‚Äëbinds those beans to the updated `Environment`. |
|178| Circuit‚Äëbreaker pattern in Spring Cloud ‚Äì Resilience4j vs. Hystrix. | **Resilience4j** is a lightweight functional library with separate modules (circuit‚Äëbreaker, rate‚Äëlimiter, bulkhead) and works with Spring Boot 3+. **Hystrix** (now deprecated) uses thread‚Äëpool isolation and provides a Dashboard; it‚Äôs heavier and no longer maintained. |
|179| How does Spring Cloud Sleuth propagate tracing information? | It generates a `traceId`/`spanId`, puts them in the MDC, adds them to outbound HTTP headers (`X‚ÄëB3‚ÄëTraceId`, `X‚ÄëB3‚ÄëSpanId`), and extracts them on inbound requests so downstream services join the same trace. |
|180| `@LoadBalanced` RestTemplate vs. WebClient ‚Äì how do they resolve service names? | Both rely on Spring Cloud LoadBalancer (previously Ribbon). The logical name (`http://my-service`) is resolved to an actual instance URL via the discovery client (Eureka, Consul, etc.). |
|181| Purpose of `@RefreshScope` and when to use it. | Marks a bean so that its configuration is **re‚Äëbound** when a refresh event occurs (e.g., after `/actuator/refresh`). Use it for beans that read mutable property values (e.g., feature flags). |
|182| How does Spring Cloud Stream bind to messaging middleware? | It creates **binder** implementations (Kafka, Rabbit) that map `@Input`/`@Output` channels to physical destinations. The `Binder` abstracts producer/consumer details, letting you write channel‚Äëcentric code. |
|183| Role of Spring Cloud Bus and typical use‚Äëcases. | It propagates **configuration change events** (and other custom events) via a messaging backbone (e.g., RabbitMQ) to all instances of a service, enabling coordinated refresh without manual calls. |
|184| Implement distributed rate limiting using Spring Cloud Gateway. | Add a `RateLimiter` filter (`RedisRateLimiter` or `RequestRateLimiterGatewayFilterFactory`) referencing a Redis backend; configure `burstCapacity` and `replenishRate` per route or globally. |
|185| What does `spring-cloud-starter-openfeign` provide? | It creates **type‚Äësafe declarative HTTP clients** by generating a proxy for an interface annotated with `@FeignClient`; the proxy handles URL resolution, request/response conversion, and integrates with Ribbon/LB and Hystrix/Resilience4j. |
|186| How does `@EnableFeignClients` work and the lifecycle of a Feign client bean? | It scans for `@FeignClient` interfaces, registers a `FeignClientFactoryBean` for each, and after the `ApplicationContext` is refreshed, the factory creates a proxy that implements the interface and injects it as a bean. |
|187| Difference between Spring Cloud Task and Spring Batch. | **Task** is a simple, short‚Äëlived microservice that executes **once** (e.g., a command‚Äëline job). **Batch** provides a robust chunk‚Äëoriented processing model with readers, processors, writers, transaction management, and job/step orchestration. |
|188| How does Spring Cloud Function enable function‚Äëas‚Äëa‚Äëservice? | It abstracts a **java.util.function** (`Supplier`, `Function`, `Consumer`) and provides adapters for various runtimes (AWS Lambda, Azure Functions, Cloud Foundry). The same code can be deployed to multiple platforms. |
|189| Purpose of Spring Cloud Kubernetes config maps and secrets integration. | It reads ConfigMaps and Secrets as property sources, making them available via `@Value`/`@ConfigurationProperties`. The integration also supports **profile‚Äëspecific** files and automatic reloading. |
|190| How can Spring Cloud Contract be used for consumer‚Äëdriven contract testing? | Define **contracts** (Groovy DSL or YAML) that generate **Stubs** for the provider and **tests** for the consumer. The provider can run the generated stub‚Äëserver to verify compliance automatically. |
|191| Role of `@Retryable` and `@Recover` in Spring Retry, especially with circuit breakers. | `@Retryable` re‚Äëexecutes a method on specified exceptions; `@Recover` provides a fallback method when retries are exhausted. When combined with a circuit breaker, retries happen **inside** the protected call, and the circuit may open after repeated failures. |
|192| Secure inter‚Äëservice communication using mutual TLS in Spring Cloud. | Configure each service‚Äôs `RestTemplate`/WebClient with an `HttpClient` that presents a client certificate (`SSLContext`). Use Spring Cloud Config to share trust stores, and set `server.ssl.client-auth=need` on the server side. |
|193| Effect of `spring.cloud.loadbalancer.retry.enabled`. | When `true`, the load balancer will **retry** a request on a different service instance if the first attempt fails (e.g., connection timeout). It works together with the circuit‚Äëbreaker to improve resiliency. |
|194| Consequences of eager initialization of `DiscoveryClient` beans on startup time. | The client contacts the registry immediately, which can **slow** startup (especially in large clusters). Lazy initialization (`@Lazy`) defers the network call until the first service lookup, reducing boot time. |
|195| Order of execution for `spring.cloud.gateway.globalfilters`. | They are ordered by `Ordered`/`@Order` (lower values first). The **first** global filter sees the request before route filters; the **last** runs after the route has been applied, just before the response is returned. |

---

## 8Ô∏è‚É£ Testing  

| # | Question | Answer |
|---|----------|--------|
|196| Difference between `@SpringBootTest` (full) and `@WebMvcTest` (slice). | `@SpringBootTest` loads the **entire** application context (all beans, data sources, etc.). `@WebMvcTest` only loads MVC components (`@Controller`, `@RestController`, `Jackson`, `MockMvc`) and mocks the rest, making it faster for controller‚Äëlevel tests. |
|197| How does `@MockBean` differ from a plain Mockito `@Mock` in a Spring test? | `@MockBean` registers the mock **as a bean** in the Spring context, replacing any existing bean of the same type. `@Mock` lives only in the test class and is not injected automatically. |
|198| Using Testcontainers to spin up a real PostgreSQL DB for integration tests. | Declare a static `@Container PostgreSQLContainer<?> pg = new PostgreSQLContainer<>("postgres:15")`; start it before the test suite. Use `@DynamicPropertySource` to programmatically set `spring.datasource.url`, `username`, `password` so Spring Boot connects to the container. |
|199| Test a `@Transactional` service method without committing any data. | Annotate the test class or method with `@Transactional`. Spring opens a transaction before the test and rolls it back afterwards, leaving the database untouched. |
|200| Purpose of `@DirtiesContext` and performance implications of over‚Äëuse. | Marks the `ApplicationContext` as dirty, forcing a **full reload** for subsequent tests. Overusing it can make the test suite **slow**, because each reload repeats component scanning, bean creation, and possible DB initialisation. Use it only when the test truly mutates shared state that cannot be reset otherwise. |

---  

